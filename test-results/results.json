{"numTotalTestSuites":25,"numPassedTestSuites":17,"numFailedTestSuites":8,"numPendingTestSuites":0,"numTotalTests":114,"numPassedTests":98,"numFailedTests":16,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1762140842853,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationMemento"],"fullName":"ConfigurationCommand Pattern ConfigurationMemento should create memento with frozen state","status":"passed","title":"should create memento with frozen state","duration":2.738300000000038,"failureMessages":[],"location":{"line":37,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationMemento"],"fullName":"ConfigurationCommand Pattern ConfigurationMemento should create deep copy of state","status":"passed","title":"should create deep copy of state","duration":0.6053999999999746,"failureMessages":[],"location":{"line":45,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationMemento"],"fullName":"ConfigurationCommand Pattern ConfigurationMemento should store timestamp on creation","status":"passed","title":"should store timestamp on creation","duration":0.38639999999998054,"failureMessages":[],"location":{"line":61,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationMemento"],"fullName":"ConfigurationCommand Pattern ConfigurationMemento should check expiration correctly","status":"passed","title":"should check expiration correctly","duration":0.32909999999998263,"failureMessages":[],"location":{"line":71,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationMemento"],"fullName":"ConfigurationCommand Pattern ConfigurationMemento should use default expiry from constants","status":"passed","title":"should use default expiry from constants","duration":0.3412999999999897,"failureMessages":[],"location":{"line":82,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationMemento"],"fullName":"ConfigurationCommand Pattern ConfigurationMemento should handle null and undefined state","status":"failed","title":"should handle null and undefined state","duration":1.428699999999992,"failureMessages":["SyntaxError: \"undefined\" is not valid JSON\n    at JSON.parse (<anonymous>)\n    at new ConfigurationMemento (C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/src/infrastructure/patterns/ConfigurationCommand.js:14:37)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/patterns/ConfigurationCommand.test.js:93:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"location":{"line":91,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationMemento"],"fullName":"ConfigurationCommand Pattern ConfigurationMemento should handle complex nested objects","status":"failed","title":"should handle complex nested objects","duration":7.566599999999994,"failureMessages":["AssertionError: expected { providers: { …(2) }, …(2) } to deeply equal { providers: { …(2) }, …(2) }\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/patterns/ConfigurationCommand.test.js:115:30\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1468:8)\n    at runSuite (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1468:8)"],"location":{"line":99,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should initialize with target and logger","status":"passed","title":"should initialize with target and logger","duration":0.45990000000000464,"failureMessages":[],"location":{"line":127,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should use console as default logger","status":"passed","title":"should use console as default logger","duration":0.362700000000018,"failureMessages":[],"location":{"line":134,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should throw error when execute is not implemented","status":"passed","title":"should throw error when execute is not implemented","duration":1.1143000000000143,"failureMessages":[],"location":{"line":139,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should throw error when _restoreState is not implemented","status":"passed","title":"should throw error when _restoreState is not implemented","duration":0.37819999999999254,"failureMessages":[],"location":{"line":143,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should not undo when not executed","status":"passed","title":"should not undo when not executed","duration":0.5966000000000236,"failureMessages":[],"location":{"line":147,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should not undo when no memento exists","status":"passed","title":"should not undo when no memento exists","duration":0.23509999999998854,"failureMessages":[],"location":{"line":154,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should save state correctly","status":"passed","title":"should save state correctly","duration":0.4386000000000081,"failureMessages":[],"location":{"line":163,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should return execution status","status":"passed","title":"should return execution status","duration":0.18379999999996244,"failureMessages":[],"location":{"line":171,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommand (Base Class)"],"fullName":"ConfigurationCommand Pattern ConfigurationCommand (Base Class) should return memento","status":"passed","title":"should return memento","duration":0.18980000000004793,"failureMessages":[],"location":{"line":178,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should initialize with type and language config","status":"passed","title":"should initialize with type and language config","duration":0.2518999999999778,"failureMessages":[],"location":{"line":199,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should execute successfully","status":"passed","title":"should execute successfully","duration":0.765199999999993,"failureMessages":[],"location":{"line":204,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should not execute twice","status":"passed","title":"should not execute twice","duration":0.6681000000000381,"failureMessages":[],"location":{"line":224,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should handle execution errors","status":"passed","title":"should handle execution errors","duration":0.9250000000000114,"failureMessages":[],"location":{"line":234,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should save current state before execution","status":"passed","title":"should save current state before execution","duration":0.3581999999999539,"failureMessages":[],"location":{"line":248,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should restore state correctly","status":"passed","title":"should restore state correctly","duration":0.48860000000001946,"failureMessages":[],"location":{"line":262,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should handle undo errors","status":"passed","title":"should handle undo errors","duration":0.45409999999998263,"failureMessages":[],"location":{"line":279,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should handle null provider config","status":"passed","title":"should handle null provider config","duration":0.290300000000002,"failureMessages":[],"location":{"line":301,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","LanguageConfigurationCommand"],"fullName":"ConfigurationCommand Pattern LanguageConfigurationCommand should handle undefined provider config","status":"passed","title":"should handle undefined provider config","duration":0.23239999999998417,"failureMessages":[],"location":{"line":313,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should initialize with logger and empty stack","status":"passed","title":"should initialize with logger and empty stack","duration":0.333500000000015,"failureMessages":[],"location":{"line":340,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should use console as default logger","status":"passed","title":"should use console as default logger","duration":0.18009999999998172,"failureMessages":[],"location":{"line":346,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should execute command successfully","status":"passed","title":"should execute command successfully","duration":0.7243000000000279,"failureMessages":[],"location":{"line":351,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should not add failed commands to stack","status":"passed","title":"should not add failed commands to stack","duration":0.40119999999996026,"failureMessages":[],"location":{"line":362,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should throw error for invalid command type","status":"passed","title":"should throw error for invalid command type","duration":0.2991999999999848,"failureMessages":[],"location":{"line":371,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should undo last command successfully","status":"passed","title":"should undo last command successfully","duration":0.5944000000000074,"failureMessages":[],"location":{"line":379,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should handle undo when stack is empty","status":"passed","title":"should handle undo when stack is empty","duration":0.7160999999999831,"failureMessages":[],"location":{"line":392,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should handle failed undo operations","status":"passed","title":"should handle failed undo operations","duration":0.9277999999999906,"failureMessages":[],"location":{"line":399,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should undo all commands","status":"passed","title":"should undo all commands","duration":1.1030999999999835,"failureMessages":[],"location":{"line":410,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should return false if any undo fails in undoAllCommands","status":"passed","title":"should return false if any undo fails in undoAllCommands","duration":0.6415999999999826,"failureMessages":[],"location":{"line":427,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should return correct command count","status":"passed","title":"should return correct command count","duration":0.6253000000000384,"failureMessages":[],"location":{"line":442,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should clear command stack","status":"passed","title":"should clear command stack","duration":0.5139999999999532,"failureMessages":[],"location":{"line":451,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should trim stack when exceeding max size","status":"passed","title":"should trim stack when exceeding max size","duration":0.9535000000000196,"failureMessages":[],"location":{"line":461,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationInvoker"],"fullName":"ConfigurationCommand Pattern ConfigurationInvoker should handle concurrent command execution","status":"passed","title":"should handle concurrent command execution","duration":0.8365999999999758,"failureMessages":[],"location":{"line":478,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommandFactory"],"fullName":"ConfigurationCommand Pattern ConfigurationCommandFactory should create language command","status":"passed","title":"should create language command","duration":0.6241999999999734,"failureMessages":[],"location":{"line":497,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommandFactory"],"fullName":"ConfigurationCommand Pattern ConfigurationCommandFactory should create language command with default logger","status":"passed","title":"should create language command with default logger","duration":0.4660999999999831,"failureMessages":[],"location":{"line":515,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommandFactory"],"fullName":"ConfigurationCommand Pattern ConfigurationCommandFactory should create invoker","status":"passed","title":"should create invoker","duration":0.3273999999999546,"failureMessages":[],"location":{"line":525,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","ConfigurationCommandFactory"],"fullName":"ConfigurationCommand Pattern ConfigurationCommandFactory should create invoker with default logger","status":"passed","title":"should create invoker with default logger","duration":0.17849999999998545,"failureMessages":[],"location":{"line":532,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Integration Tests"],"fullName":"ConfigurationCommand Pattern Integration Tests should handle complete workflow with factory","status":"passed","title":"should handle complete workflow with factory","duration":0.4756999999999607,"failureMessages":[],"location":{"line":540,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Integration Tests"],"fullName":"ConfigurationCommand Pattern Integration Tests should handle multiple commands with different configurations","status":"passed","title":"should handle multiple commands with different configurations","duration":0.4415000000000191,"failureMessages":[],"location":{"line":573,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Integration Tests"],"fullName":"ConfigurationCommand Pattern Integration Tests should handle error recovery in complex scenarios","status":"passed","title":"should handle error recovery in complex scenarios","duration":0.42430000000001655,"failureMessages":[],"location":{"line":602,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Integration Tests"],"fullName":"ConfigurationCommand Pattern Integration Tests should maintain memento integrity across operations","status":"passed","title":"should maintain memento integrity across operations","duration":0.6689999999999827,"failureMessages":[],"location":{"line":624,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Edge Cases and Error Handling"],"fullName":"ConfigurationCommand Pattern Edge Cases and Error Handling should handle null target gracefully","status":"failed","title":"should handle null target gracefully","duration":1.4184999999999945,"failureMessages":["AssertionError: expected [Function] to throw an error\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1481:16)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/patterns/ConfigurationCommand.test.js:662:39\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":654,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Edge Cases and Error Handling"],"fullName":"ConfigurationCommand Pattern Edge Cases and Error Handling should handle circular references in state","status":"passed","title":"should handle circular references in state","duration":0.737700000000018,"failureMessages":[],"location":{"line":665,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Edge Cases and Error Handling"],"fullName":"ConfigurationCommand Pattern Edge Cases and Error Handling should handle very large command stacks","status":"passed","title":"should handle very large command stacks","duration":32.612599999999986,"failureMessages":[],"location":{"line":682,"column":7},"meta":{}},{"ancestorTitles":["ConfigurationCommand Pattern","Edge Cases and Error Handling"],"fullName":"ConfigurationCommand Pattern Edge Cases and Error Handling should handle memento expiration","status":"passed","title":"should handle memento expiration","duration":2.13900000000001,"failureMessages":[],"location":{"line":697,"column":7},"meta":{}}],"startTime":1762140843218,"endTime":1762140843291.139,"status":"failed","message":"","name":"C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/patterns/ConfigurationCommand.test.js"},{"assertionResults":[{"ancestorTitles":["EnhancedLogger","Constructor"],"fullName":"EnhancedLogger Constructor should initialize with default parameters","status":"passed","title":"should initialize with default parameters","duration":2.282600000000002,"failureMessages":[],"location":{"line":40,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Constructor"],"fullName":"EnhancedLogger Constructor should initialize with custom log level","status":"passed","title":"should initialize with custom log level","duration":0.5858000000000061,"failureMessages":[],"location":{"line":46,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Constructor"],"fullName":"EnhancedLogger Constructor should apply production configuration","status":"passed","title":"should apply production configuration","duration":0.544399999999996,"failureMessages":[],"location":{"line":52,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Constructor"],"fullName":"EnhancedLogger Constructor should use development settings in non-production","status":"passed","title":"should use development settings in non-production","duration":0.3058000000000334,"failureMessages":[],"location":{"line":69,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Log Level Management"],"fullName":"EnhancedLogger Log Level Management should set and get log level","status":"passed","title":"should set and get log level","duration":0.30639999999999645,"failureMessages":[],"location":{"line":83,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Log Level Management"],"fullName":"EnhancedLogger Log Level Management should respect log level hierarchy for info level","status":"passed","title":"should respect log level hierarchy for info level","duration":3.2339999999999804,"failureMessages":[],"location":{"line":91,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Log Level Management"],"fullName":"EnhancedLogger Log Level Management should respect log level hierarchy for error level","status":"passed","title":"should respect log level hierarchy for error level","duration":0.5455000000000041,"failureMessages":[],"location":{"line":111,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Log Level Management"],"fullName":"EnhancedLogger Log Level Management should log all levels for debug level","status":"passed","title":"should log all levels for debug level","duration":0.5544000000000437,"failureMessages":[],"location":{"line":127,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Basic Logging Methods"],"fullName":"EnhancedLogger Basic Logging Methods should log info messages","status":"passed","title":"should log info messages","duration":1.2954999999999472,"failureMessages":[],"location":{"line":147,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Basic Logging Methods"],"fullName":"EnhancedLogger Basic Logging Methods should log warning messages","status":"passed","title":"should log warning messages","duration":0.5869999999999891,"failureMessages":[],"location":{"line":155,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Basic Logging Methods"],"fullName":"EnhancedLogger Basic Logging Methods should log error messages","status":"passed","title":"should log error messages","duration":0.5304999999999609,"failureMessages":[],"location":{"line":163,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Basic Logging Methods"],"fullName":"EnhancedLogger Basic Logging Methods should log debug messages","status":"passed","title":"should log debug messages","duration":0.5578000000000429,"failureMessages":[],"location":{"line":171,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Basic Logging Methods"],"fullName":"EnhancedLogger Basic Logging Methods should handle function messages (lazy evaluation)","status":"passed","title":"should handle function messages (lazy evaluation)","duration":0.804300000000012,"failureMessages":[],"location":{"line":179,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Basic Logging Methods"],"fullName":"EnhancedLogger Basic Logging Methods should not evaluate function messages when log level prevents logging","status":"passed","title":"should not evaluate function messages when log level prevents logging","duration":0.38069999999999027,"failureMessages":[],"location":{"line":190,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Basic Logging Methods"],"fullName":"EnhancedLogger Basic Logging Methods should handle additional arguments","status":"passed","title":"should handle additional arguments","duration":1.0434999999999945,"failureMessages":[],"location":{"line":200,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Source Tracking"],"fullName":"EnhancedLogger Source Tracking should enable source tracking by default","status":"passed","title":"should enable source tracking by default","duration":0.3797999999999888,"failureMessages":[],"location":{"line":215,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Source Tracking"],"fullName":"EnhancedLogger Source Tracking should disable source tracking when configured","status":"passed","title":"should disable source tracking when configured","duration":0.30469999999996844,"failureMessages":[],"location":{"line":225,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Source Tracking"],"fullName":"EnhancedLogger Source Tracking should toggle source tracking","status":"passed","title":"should toggle source tracking","duration":0.3271000000000299,"failureMessages":[],"location":{"line":236,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Child Logger"],"fullName":"EnhancedLogger Child Logger should create child logger with prefix","status":"passed","title":"should create child logger with prefix","duration":0.4168000000000234,"failureMessages":[],"location":{"line":254,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Child Logger"],"fullName":"EnhancedLogger Child Logger should handle lazy evaluation in child logger","status":"passed","title":"should handle lazy evaluation in child logger","duration":0.4286999999999921,"failureMessages":[],"location":{"line":264,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Child Logger"],"fullName":"EnhancedLogger Child Logger should inherit log level from parent","status":"passed","title":"should inherit log level from parent","duration":0.44839999999999236,"failureMessages":[],"location":{"line":276,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Child Logger"],"fullName":"EnhancedLogger Child Logger should support all log levels in child logger","status":"passed","title":"should support all log levels in child logger","duration":0.6616999999999962,"failureMessages":[],"location":{"line":289,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Structured Logging"],"fullName":"EnhancedLogger Structured Logging should log structured data in development","status":"passed","title":"should log structured data in development","duration":0.4451000000000249,"failureMessages":[],"location":{"line":317,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Structured Logging"],"fullName":"EnhancedLogger Structured Logging should log structured data in production as JSON","status":"passed","title":"should log structured data in production as JSON","duration":0.3562000000000012,"failureMessages":[],"location":{"line":333,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Structured Logging"],"fullName":"EnhancedLogger Structured Logging should handle empty metadata","status":"passed","title":"should handle empty metadata","duration":0.37330000000002883,"failureMessages":[],"location":{"line":349,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Structured Logging"],"fullName":"EnhancedLogger Structured Logging should respect log levels in structured logging","status":"passed","title":"should respect log levels in structured logging","duration":0.4965000000000259,"failureMessages":[],"location":{"line":355,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Transaction Logging"],"fullName":"EnhancedLogger Transaction Logging should log with transaction ID","status":"passed","title":"should log with transaction ID","duration":0.7060000000000173,"failureMessages":[],"location":{"line":370,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Transaction Logging"],"fullName":"EnhancedLogger Transaction Logging should handle lazy evaluation with transaction ID","status":"passed","title":"should handle lazy evaluation with transaction ID","duration":0.39189999999996417,"failureMessages":[],"location":{"line":380,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Transaction Logging"],"fullName":"EnhancedLogger Transaction Logging should handle additional arguments with transaction","status":"passed","title":"should handle additional arguments with transaction","duration":0.37819999999999254,"failureMessages":[],"location":{"line":392,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Universal Log Method"],"fullName":"EnhancedLogger Universal Log Method should log with component option","status":"passed","title":"should log with component option","duration":0.42200000000002547,"failureMessages":[],"location":{"line":410,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Universal Log Method"],"fullName":"EnhancedLogger Universal Log Method should log with structured data","status":"passed","title":"should log with structured data","duration":0.2756999999999721,"failureMessages":[],"location":{"line":418,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Universal Log Method"],"fullName":"EnhancedLogger Universal Log Method should log with transaction ID","status":"passed","title":"should log with transaction ID","duration":0.2728999999999928,"failureMessages":[],"location":{"line":426,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Universal Log Method"],"fullName":"EnhancedLogger Universal Log Method should combine component and data","status":"passed","title":"should combine component and data","duration":0.36529999999999063,"failureMessages":[],"location":{"line":434,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Universal Log Method"],"fullName":"EnhancedLogger Universal Log Method should handle empty options","status":"passed","title":"should handle empty options","duration":0.42140000000000555,"failureMessages":[],"location":{"line":445,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log operation completion","status":"failed","title":"should log operation completion","duration":4.823600000000056,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"dataProcessing completada\",\u001b[90m\n\u001b[31m+   \"[INFO] 2025-11-03T03:34:03.241Z [utils/EnhancedLogger.test.js:345] - dataProcessing completada en 150ms\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"duration\": 150,\u001b[90m\n\u001b[31m+     \"itemsProcessed\": 10,\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:464:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":459,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log validation failures","status":"failed","title":"should log validation failures","duration":2.063799999999958,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Validación fallida para User\",\u001b[90m\n\u001b[31m+   \"[WARN] 2025-11-03T03:34:03.246Z [utils/EnhancedLogger.test.js:352] - Validación falló para User: Invalid email format\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"field\": \"email\",\u001b[90m\n\u001b[31m+     \"value\": \"invalid-email\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:474:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":469,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log resource not found","status":"failed","title":"should log resource not found","duration":1.596400000000017,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Movie no encontrado\",\u001b[90m\n\u001b[31m+   \"[WARN] 2025-11-03T03:34:03.248Z [utils/EnhancedLogger.test.js:359] - No se encontró Movie: tt1234567\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"searchCriteria\": \"id=123\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:484:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":479,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log configuration applied","status":"failed","title":"should log configuration applied","duration":1.2250000000000227,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Configuración torService aplicada\",\u001b[90m\n\u001b[31m+   \"[INFO] 2025-11-03T03:34:03.250Z [utils/EnhancedLogger.test.js:365] - torService configurado a: {\\\"enabled\\\":true,\\\"port\\\":9050}\",\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:492:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":489,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log search results","status":"failed","title":"should log search results","duration":1.2150000000000318,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining \"Búsqueda magnet\" ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Búsqueda magnet\",\u001b[90m\n\u001b[31m+   \"[INFO] 2025-11-03T03:34:03.251Z [utils/EnhancedLogger.test.js:372] - Encontrados 5 resultados magnet para tt1234567\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"cached\": false,\u001b[90m\n\u001b[31m+     \"source\": \"API\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:502:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":497,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log resource discarded","status":"failed","title":"should log resource discarded","duration":1.0120999999999754,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ Array(1) ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Magnet descartado\",\u001b[90m\n\u001b[31m+   \"[DEBUG] 2025-11-03T03:34:03.252Z [utils/EnhancedLogger.test.js:379] - Magnet descartado: No seeders available\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"quality\": \"low\",\u001b[90m\n\u001b[31m+     \"seeders\": 0,\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:512:33\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":507,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log processing errors","status":"failed","title":"should log processing errors","duration":1.3582000000000107,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Error en operación dataValidation\",\u001b[90m\n\u001b[31m+   \"[ERROR] 2025-11-03T03:34:03.253Z [utils/EnhancedLogger.test.js:387] - Error en dataValidation:\",\u001b[90m\n\u001b[31m+   Error {\u001b[90m\n\u001b[31m+     \"message\": \"Processing failed\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"input\": \"data\",\u001b[90m\n\u001b[31m+     \"step\": \"validation\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:523:33\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":517,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log selection made","status":"failed","title":"should log selection made","duration":1.1090999999999553,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Selección magnet realizada\",\u001b[90m\n\u001b[31m+   \"[INFO] 2025-11-03T03:34:03.255Z [utils/EnhancedLogger.test.js:394] - magnet seleccionado: Best quality option\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"quality\": \"1080p\",\u001b[90m\n\u001b[31m+     \"seeders\": 100,\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:533:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":528,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log non-optimal conditions","status":"failed","title":"should log non-optimal conditions","duration":1.2783999999999764,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Condición no óptima detectada\",\u001b[90m\n\u001b[31m+   \"[WARN] 2025-11-03T03:34:03.256Z [utils/EnhancedLogger.test.js:401] - Condición no óptima - Low seeders: Slower download\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"currentValue\": 5,\u001b[90m\n\u001b[31m+     \"optimalValue\": 50,\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:543:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":538,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log resource changes","status":"failed","title":"should log resource changes","duration":0.9089000000000169,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Cambio en recurso TorService\",\u001b[90m\n\u001b[31m+   \"[INFO] 2025-11-03T03:34:03.257Z [utils/EnhancedLogger.test.js:408] - TorService status_change\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"from\": \"inactive\",\u001b[90m\n\u001b[31m+     \"to\": \"active\",\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:553:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":548,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Specialized Logging Methods"],"fullName":"EnhancedLogger Specialized Logging Methods should log configuration status","status":"failed","title":"should log configuration status","duration":0.9478999999999473,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"Estado de configuración apiConfig\",\u001b[90m\n\u001b[31m+   \"[WARN] 2025-11-03T03:34:03.258Z [utils/EnhancedLogger.test.js:415] - apiConfig inválida\",\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"errors\": [\u001b[90m\n\u001b[31m+       \"Missing API key\",\u001b[90m\n\u001b[31m+     ],\u001b[90m\n\u001b[31m+   },\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1416:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:563:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":558,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Performance Metrics"],"fullName":"EnhancedLogger Performance Metrics should track log counts","status":"passed","title":"should track log counts","duration":1.2101999999999862,"failureMessages":[],"location":{"line":574,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Performance Metrics"],"fullName":"EnhancedLogger Performance Metrics should track performance over time","status":"passed","title":"should track performance over time","duration":0.8124000000000251,"failureMessages":[],"location":{"line":589,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Performance Metrics"],"fullName":"EnhancedLogger Performance Metrics should reset performance metrics","status":"passed","title":"should reset performance metrics","duration":0.5364000000000146,"failureMessages":[],"location":{"line":601,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Performance Metrics"],"fullName":"EnhancedLogger Performance Metrics should include timing information in metrics","status":"passed","title":"should include timing information in metrics","duration":0.4847000000000321,"failureMessages":[],"location":{"line":612,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Batching (Production Mode)"],"fullName":"EnhancedLogger Batching (Production Mode) should process errors immediately even with batching enabled","status":"passed","title":"should process errors immediately even with batching enabled","duration":0.46109999999998763,"failureMessages":[],"location":{"line":635,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Batching (Production Mode)"],"fullName":"EnhancedLogger Batching (Production Mode) should batch non-error logs","status":"passed","title":"should batch non-error logs","duration":105.94659999999999,"failureMessages":[],"location":{"line":643,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Batching (Production Mode)"],"fullName":"EnhancedLogger Batching (Production Mode) should flush batch when size limit reached","status":"passed","title":"should flush batch when size limit reached","duration":0.5114000000000374,"failureMessages":[],"location":{"line":656,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Resource Management"],"fullName":"EnhancedLogger Resource Management should flush pending logs","status":"passed","title":"should flush pending logs","duration":0.3422999999999661,"failureMessages":[],"location":{"line":670,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Resource Management"],"fullName":"EnhancedLogger Resource Management should destroy logger and clean up resources","status":"passed","title":"should destroy logger and clean up resources","duration":0.311300000000017,"failureMessages":[],"location":{"line":677,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Resource Management"],"fullName":"EnhancedLogger Resource Management should handle multiple destroy calls","status":"passed","title":"should handle multiple destroy calls","duration":0.29059999999998354,"failureMessages":[],"location":{"line":684,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Error Handling"],"fullName":"EnhancedLogger Error Handling should handle console method not available","status":"passed","title":"should handle console method not available","duration":0.6126999999999612,"failureMessages":[],"location":{"line":698,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Error Handling"],"fullName":"EnhancedLogger Error Handling should handle function message errors gracefully","status":"failed","title":"should handle function message errors gracefully","duration":2.359899999999982,"failureMessages":["AssertionError: expected [Function] to not throw an error but 'Error: Message function error' was thrown\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1481:16)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:716:51\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":710,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Error Handling"],"fullName":"EnhancedLogger Error Handling should handle invalid log levels","status":"failed","title":"should handle invalid log levels","duration":0.476600000000019,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called at least once\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1396:10)\n    at Proxy.<anonymous> (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/expect/dist/index.js:1086:14)\n    at Proxy.methodWrapper (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/chai/index.js:1701:25)\n    at C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js:725:32\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:157:11\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:753:26\n    at file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1636:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1602:10)\n    at runTest (file:///C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/node_modules/@vitest/runner/dist/index.js:1309:12)"],"location":{"line":719,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Edge Cases"],"fullName":"EnhancedLogger Edge Cases should handle null and undefined messages","status":"passed","title":"should handle null and undefined messages","duration":0.3564000000000078,"failureMessages":[],"location":{"line":734,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Edge Cases"],"fullName":"EnhancedLogger Edge Cases should handle empty string messages","status":"passed","title":"should handle empty string messages","duration":0.5038000000000125,"failureMessages":[],"location":{"line":741,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Edge Cases"],"fullName":"EnhancedLogger Edge Cases should handle circular references in arguments","status":"passed","title":"should handle circular references in arguments","duration":0.4549000000000092,"failureMessages":[],"location":{"line":749,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Edge Cases"],"fullName":"EnhancedLogger Edge Cases should handle very long messages","status":"passed","title":"should handle very long messages","duration":0.40629999999998745,"failureMessages":[],"location":{"line":757,"column":5},"meta":{}},{"ancestorTitles":["EnhancedLogger","Edge Cases"],"fullName":"EnhancedLogger Edge Cases should handle concurrent logging","status":"passed","title":"should handle concurrent logging","duration":1.6135000000000446,"failureMessages":[],"location":{"line":767,"column":5},"meta":{}}],"startTime":1762140843218,"endTime":1762140843376.6135,"status":"failed","message":"","name":"C:/Users/Ankel/dev/veoveo/bun-postgresql-streamio-magnet/tests/unit/infrastructure/utils/EnhancedLogger.test.js"}]}